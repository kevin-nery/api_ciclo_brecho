generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model categorias {
  id       Int        @id @default(autoincrement())
  nome     String     @unique @db.VarChar(100)
  produtos produtos[]
}

model produto_fotos {
  id              Int       @id @default(autoincrement())
  produto_id      Int
  url_foto        String
  public_id_nuvem String?
  provider        String?   @default("cloudinary") @db.VarChar(20)
  e_principal     Boolean?  @default(false)
  data_upload     DateTime? @default(now()) @db.Timestamp(6)
  produtos        produtos  @relation(fields: [produto_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model produtos {
  id             Int             @id @default(autoincrement())
  nome           String          @db.VarChar(255)
  descricao      String?
  categoria_id   Int?
  preco_etiqueta Decimal         @default(0.00) @db.Decimal(10, 2)
  custo          Decimal         @default(0.00) @db.Decimal(10, 2)
  data_cadastro  DateTime?       @default(now()) @db.Timestamp(6)
  tamanho        String?         @db.VarChar(5)
  status_id      Int?
  produto_fotos  produto_fotos[]
  status         status?         @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_status")
  categorias     categorias?     @relation(fields: [categoria_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  venda_itens    venda_itens[]
}

model venda_itens {
  id             Int       @id @default(autoincrement())
  venda_id       Int?
  produto_id     Int?
  preco_aplicado Decimal   @db.Decimal(10, 2)
  produtos       produtos? @relation(fields: [produto_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  vendas         vendas?   @relation(fields: [venda_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model vendas {
  id               Int           @id @default(autoincrement())
  data_venda       DateTime?     @default(now()) @db.Timestamp(6)
  valor_total      Decimal       @default(0.00) @db.Decimal(10, 2)
  metodo_pagamento String?       @db.VarChar(20)
  venda_itens      venda_itens[]
}

model status {
  id        Int        @id @default(autoincrement())
  descricao String     @db.VarChar(20)
  produtos  produtos[]
}
